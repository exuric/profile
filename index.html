<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Roblox Outfit Finder</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:black;
  color:white;
  font-family:Inter,Arial;
  overflow:hidden;
}

#stars,#waves{
  position:fixed;
  inset:0;
  z-index:-2;
}
#waves{
  background:linear-gradient(#001,#002);
  animation:wave 8s ease-in-out infinite alternate;
}
@keyframes wave{to{transform:translateY(-30px)}}

.glass{
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(14px);
  border:1px solid rgba(255,255,255,.15);
  border-radius:16px;
}

#wrap{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

#app{
  width:440px;
  padding:28px;
  text-align:center;
}

input{
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  font-size:16px;
  outline:none;
}

button{
  margin-top:14px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#ff3b6f;
  color:white;
  font-size:16px;
  cursor:pointer;
}

#profile{
  margin-top:22px;
  display:none;
}

#avatar{
  margin-top:12px;
  border-radius:12px;
  border:2px solid rgba(255,255,255,.2);
}

.items{
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
}

.item{
  background:rgba(255,255,255,.06);
  padding:6px;
  border-radius:10px;
  font-size:11px;
  text-align:center;
}
</style>
</head>
<body>

<canvas id="stars"></canvas>
<div id="waves"></div>

<div id="wrap">
  <div id="app" class="glass">
    <h2>Roblox Outfit Finder</h2>
    <p>View a user's current outfit</p>

    <input id="username" placeholder="Roblox username">
    <button onclick="findUser()">Find Outfit</button>

    <div id="profile">
      <h3 id="name"></h3>
      <img id="avatar" width="180" height="180">
      <div class="items" id="items"></div>
    </div>
  </div>
</div>

<script>
/* BACKGROUND STARS */
const sc=document.getElementById("stars"),sctx=sc.getContext("2d");
sc.width=innerWidth; sc.height=innerHeight;
const stars=[...Array(140)].map(()=>({
  x:Math.random()*sc.width,
  y:Math.random()*sc.height,
  s:Math.random()+.4
}));
(function loop(){
  sctx.clearRect(0,0,sc.width,sc.height);
  sctx.fillStyle="white";
  stars.forEach(st=>{
    st.y+=st.s;
    if(st.y>sc.height) st.y=0;
    sctx.fillRect(st.x,st.y,1.5,1.5);
  });
  requestAnimationFrame(loop);
})();

/* ROBLOX API */
async function findUser(){
  const username=document.getElementById("username").value.trim();
  if(!username) return;

  document.getElementById("profile").style.display="none";

  try{
    // 1️⃣ Username → UserId (reliable endpoint)
    const userRes=await fetch(
      `https://api.allorigins.win/raw?url=https://users.roblox.com/v1/users/search?keyword=${encodeURIComponent(username)}&limit=10`
    );
    const userData=await userRes.json();
    const user=userData.data.find(u=>u.name.toLowerCase()===username.toLowerCase());
    if(!user) throw "Not found";

    document.getElementById("name").textContent=user.displayName;

    // 2️⃣ Avatar
    const avatarRes=await fetch(
      `https://api.allorigins.win/raw?url=https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${user.id}&size=420x420&format=Png`
    );
    const avatarData=await avatarRes.json();
    document.getElementById("avatar").src=avatarData.data[0].imageUrl;

    // 3️⃣ Outfit details
    const outfitRes=await fetch(
      `https://api.allorigins.win/raw?url=https://avatar.roblox.com/v1/users/${user.id}/currently-wearing`
    );
    const outfitData=await outfitRes.json();

    const itemsDiv=document.getElementById("items");
    itemsDiv.innerHTML="";

    outfitData.assetIds.forEach(id=>{
      const div=document.createElement("div");
      div.className="item";
      div.textContent=`Asset ${id}`;
      itemsDiv.appendChild(div);
    });

    document.getElementById("profile").style.display="block";
  }catch(e){
    alert("User not found or Roblox API blocked");
  }
}
</script>

</body>
</html>
