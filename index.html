<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BlockBlast</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital@1&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:black;
  color:white;
  overflow:hidden;
  font-family:Arial;
}
canvas{touch-action:none}

/* BACKGROUND */
#stars,#waves{
  position:fixed;
  inset:0;
  z-index:-2;
}
#waves{
  background:linear-gradient(#001,#003);
  animation:wave 7s ease-in-out infinite alternate;
}
@keyframes wave{to{transform:translateY(-25px)}}

/* GLASS */
.glass{
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,.18);
  border-radius:14px;
}

/* UI */
#hud{
  position:absolute;
  top:15px;
  left:15px;
  padding:12px 16px;
}
#ads{
  position:absolute;
  top:15px;
  right:15px;
  padding:12px 16px;
}
#footer{
  position:absolute;
  bottom:14px;
  left:50%;
  transform:translateX(-50%);
  padding:10px 26px;
  font-family:'Playfair Display',cursive;
}

/* MENUS */
#menu,#pause{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.6);
  z-index:5;
}
.menuBox{
  padding:30px;
  text-align:center;
}
button{
  padding:12px 24px;
  border:none;
  border-radius:10px;
  background:#ff3b6f;
  color:white;
  font-size:16px;
  cursor:pointer;
}

/* GAME */
#wrap{
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}
#game{
  background:rgba(0,0,0,.4);
  border-radius:18px;
}
</style>
</head>
<body>

<canvas id="stars"></canvas>
<div id="waves"></div>

<div id="menu">
  <div class="menuBox glass">
    <h1>BlockBlast</h1>
    <button onclick="startGame()">Start Game</button>
  </div>
</div>

<div id="pause" style="display:none">
  <div class="menuBox glass">
    <h2>Paused</h2>
    <button onclick="resume()">Resume</button>
  </div>
</div>

<div id="hud" class="glass">
  Score: <span id="score">0</span><br>
  Combo: x<span id="combo">1</span><br>
  Level: <span id="level">1</span>
</div>

<div id="ads" class="glass">
  Revenue: $<span id="money">0.00</span>
</div>

<div id="wrap">
  <canvas id="game" width="420" height="560"></canvas>
</div>

<div id="footer" class="glass">
  Website co-founded originally made by .exuric
</div>

<audio id="hit" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.wav"></audio>
<audio id="boom" src="https://assets.mixkit.co/sfx/preview/mixkit-explosion-hit-1704.wav"></audio>

<script>
/* STARS */
const sc=document.getElementById("stars"),sctx=sc.getContext("2d");
sc.width=innerWidth; sc.height=innerHeight;
const stars=[...Array(140)].map(()=>({
  x:Math.random()*sc.width,
  y:Math.random()*sc.height,
  s:Math.random()+.3
}));
(function starLoop(){
  sctx.clearRect(0,0,sc.width,sc.height);
  sctx.fillStyle="white";
  stars.forEach(st=>{
    st.y+=st.s;
    if(st.y>sc.height) st.y=0;
    sctx.fillRect(st.x,st.y,1.5,1.5);
  });
  requestAnimationFrame(starLoop);
})();

/* GAME */
const c=document.getElementById("game"),ctx=c.getContext("2d");
const hit=document.getElementById("hit"),boom=document.getElementById("boom");

let blocks=[],particles=[];
let score=0,combo=1,level=1,money=0;
let running=false,paused=false;
let slow=false,double=false;

/* MENUS */
function startGame(){
  document.getElementById("menu").style.display="none";
  running=true;
}
function resume(){
  paused=false;
  document.getElementById("pause").style.display="none";
}
addEventListener("keydown",e=>{
  if(e.key==="Escape"&&running){
    paused=!paused;
    document.getElementById("pause").style.display=paused?"flex":"none";
  }
});

/* SPAWN */
setInterval(()=>{
  if(!running||paused) return;
  const r=Math.random();
  blocks.push({
    x:Math.random()*(c.width-50),
    y:-60,
    s:r>.95?80:50,
    hp:r>.95?5:1,
    v:(slow?1:2)+Math.random()*2,
    type:r>.9?"bomb":r>.7?"power":"normal"
  });
},850);

/* CLICK EFFECT */
function burst(x,y){
  for(let i=0;i<18;i++){
    particles.push({
      x,y,
      vx:(Math.random()-.5)*6,
      vy:(Math.random()-.5)*6,
      life:20
    });
  }
}

/* INPUT */
function handle(x,y){
  blocks.forEach((b,i)=>{
    if(x>b.x&&x<b.x+b.s&&y>b.y&&y<b.y+b.s){
      b.hp--; burst(x,y);
      if(b.hp<=0){
        if(b.type==="bomb"){
          score=Math.max(0,score-30);
          combo=1; boom.play();
        } else {
          combo++;
          let gain=(b.type==="power"?25:10)*combo*(double?2:1);
          score+=gain; money+=gain*0.002;
          hit.play();
          if(b.type==="power"){
            slow=true; double=true;
            setTimeout(()=>slow=double=false,5000);
          }
        }
        if(score>level*250) level++;
        updateUI();
        blocks.splice(i,1);
      }
    }
  });
}

c.onclick=e=>{
  const r=c.getBoundingClientRect();
  handle(e.clientX-r.left,e.clientY-r.top);
};
c.ontouchstart=e=>{
  const t=e.touches[0],r=c.getBoundingClientRect();
  handle(t.clientX-r.left,t.clientY-r.top);
};

/* LOOP */
(function loop(){
  if(running&&!paused){
    ctx.clearRect(0,0,c.width,c.height);
    blocks.forEach((b,i)=>{
      b.y+=b.v;
      ctx.fillStyle=
        b.type==="bomb"?"#ffcc00":
        b.type==="power"?"#3bff8f":"#ff3b6f";
      ctx.shadowColor=ctx.fillStyle;
      ctx.shadowBlur=20;
      ctx.fillRect(b.x,b.y,b.s,b.s);
      if(b.y>c.height){ combo=1; blocks.splice(i,1); }
    });
    particles.forEach((p,i)=>{
      p.x+=p.vx; p.y+=p.vy; p.life--;
      ctx.fillStyle="white";
      ctx.fillRect(p.x,p.y,3,3);
      if(p.life<=0) particles.splice(i,1);
    });
  }
  requestAnimationFrame(loop);
})();

function updateUI(){
  scoreEl.textContent=score;
  comboEl.textContent=combo;
  levelEl.textContent=level;
  moneyEl.textContent=money.toFixed(2);
}

const scoreEl=scoreEl=document.getElementById("score");
const comboEl=document.getElementById("combo");
const levelEl=document.getElementById("level");
const moneyEl=document.getElementById("money");
</script>

</body>
</html>
